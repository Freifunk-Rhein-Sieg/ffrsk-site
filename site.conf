{

-- Stand: 23.07.2023

    hostname_prefix = 've-rhb-',
    site_name = 'Freifunk Rheinbach',
    site_code = 've-rhb',
    default_domain = 'dom10',
    
--    authorized_keys = {
--        'ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCWJjFLLnarSVvniQFvjA3je/YTL98adZk7r1dIgSt5nLheUlPvM7KzC1gvhQZQVDOsIThRf3wzJfPwlLbIOo8uNFI6jTUM8YBlAZRLxNwVjRPWWzyp2g6ayHgpOENqBH3/sSjSmtxnPAF7Fw04d8RLui//Kdj3PQIaB0hnbbNtowvT6oFzt6WXwumIv1dF2sRz9ocIq/FfHHJcq/YEhzXZ0Ri3K452YEm1FGkhwZRRA7nrXkF+AjtNnb+6B3ytA7+6/xTwmLJGQqTJWB3xw3RSXU59WJcTKBw3Y9ZDjV5PqBQFmfgI7ZiWO3de71lZjoe1YwRuyy7azsiHubFIo+DP router@freifunkrheinbach.de'
--    },
    


    opkg = {
        openwrt = 'https://downloads.openwrt.org/releases/%v/packages/%A',
            extra = {
            gluon = 'http://images.freifunk-rhein-sieg.net/rheinbach/packages/gluon-%GS-%GR/%S',
        },
    },


    timezone = 'CET-1CEST,M3.5.0,M10.5.0/3', -- Europe/Berlin

    regdom = 'DE',

    -- Options specific to routing protocols (optional)
    
    mesh = {
          vxlan = true,
          filter_membership_reports = false,

        -- Options specific to the batman-adv routing protocol (optional)
        batman_adv = {
            routing_algo = 'BATMAN IV',
            -- BATMAN IV and V are not compatible 
            -- gw_sel_class, optional, default = 20
            -- Gateway selection class (optional)
            -- gw_sel_class, optional, default = 20
            -- The default class 20 is based on the link quality (TQ) only,
            -- class 1 is calculated from both the TQ and the announced bandwidth
            gw_sel_class = 20,
        },
    },

    -- Filter all router advertisements not originating from Gateway with best link quality (TQ)
    radv_filterd = {
        -- threshold should be in sync with mesh.batman_adv.gw_sel_class
        threshold = 20,
    },

    mesh_vpn = {
        mtu = 1364,
        enabled = true,
        tunneldigger = {
            enabled = true,
        }, -- tunneldigger
        bandwidth_limit = {
            enabled = false,
            egress = 400,
            ingress = 6000,
        },
    },

    -- disable BATMAN on WAN and LAN interface by default
    mesh_on_wan = false,
    mesh_on_lan = false,

    autoupdater = {
        enabled = true,
        branch = 'stable',
        branches = {
            stable = {
                name = 'stable',
                mirrors = {
                    'http://firmware.ffve/voreifel/stable/sysupgrade',  -- local dns for Updateserver
          	    'http://firmware.freifunk-rhein-sieg.net/voreifel/stable/sysupgrade', -- Freifunk Rhein-Sieg Updateserver
	            'http://[2a01:4f8:11d:600::183]/voreifel/stable/sysupgrade', -- Freifunk Rhein-Sieg Updateserver static IPV6 Fallback
                    'http://[2a03:2260:301a::1]/voreifel/stable/sysupgrade',  -- supernode 1 Fallback
                    'http://[2a03:2260:301a::2]/voreifel/stable/sysupgrade',  -- supernode 2 Fallback
--                    'http://images.freifunk-rheinbach.de/latest/stable/images/sysupgrade' ,           -- auf vserver
--                    'http://[2a01:238:4216:400:2719:9f12:f159:ba3f]/latest/stable/images/sysupgrade', -- wie 1, mit IPv6 
                    
                }, -- mirrors
                good_signatures = 2,
                pubkeys = {
                    '88bfb774de03b069966c24b322cd6c08ff8748398d42f633bb55eae832ca4eaa', -- freifunk-rhein-sieg buildserver
                    '3905b03a3eb6201013fa9e8af5a8cfc7208ac30eb92ff253eb91785b2b58a514', -- Thomas
                    'b1848a78b33b532e60a44e43429432ffea4b2962f2fb4008e22c28045592430', -- Andreas
                    '101ca1881f2dbb6a9446dc8288f1264dddca2bf4fc2026a267e71ae2b44656ea', -- Claus
                    'fae080f9b05f3457bbd8fb21be9e1b32c7dadcefb0af11ad729970aee44f8a9d', -- Lukas
                    '500ac04af59da09e4e62c8df63bc8b9d3c0fe251d336fddfc0b176d0eecb72a7', -- Oliver
		    '2647b9fec75e130e153728ee8fad14b24764f23637eb9f3b0a68f2a279a74914' -- Stefan                    
                }, -- pubkeys
            }, -- stable
            testing = {
                name = 'testing',
                mirrors = {
                    'http://firmware.ffve/voreifel/testing/sysupgrade',  -- local dns for Updateserver
          	        'http://firmware.freifunk-rhein-sieg.net/voreifel/testing/sysupgrade', -- Freifunk Rhein-Sieg Updateserver
		            'http://[2a01:4f8:11d:600::183]/voreifel/testing/sysupgrade', -- Freifunk Rhein-Sieg Updateserver static IPV6 Fallback
                    'http://[2a03:2260:301a::1]/voreifel/testing/sysupgrade',  -- supernode 1 Fallback
                    'http://[2a03:2260:301a::2]/voreifel/testing/sysupgrade',  -- supernode 2 Fallback
--                  'http://images.freifunk-rheinbach.de/latest/testing/images/sysupgrade',            -- auf VServer
--                  'http://[2a01:238:4216:400:2719:9f12:f159:ba3f]/latest/testing/images/sysupgrade', -- wie 1, mit IPv6
                }, -- mirrors
                good_signatures = 2,
                pubkeys = {                      
                    '88bfb774de03b069966c24b322cd6c08ff8748398d42f633bb55eae832ca4eaa', -- freifunk-rhein-sieg-buildserver
                    '3905b03a3eb6201013fa9e8af5a8cfc7208ac30eb92ff253eb91785b2b58a514', -- Thomas
                    'b1848a78b33b532e60a44e43429432ffea4b2962f2fb4008e22c28045592430', -- Andreas
                    '101ca1881f2dbb6a9446dc8288f1264dddca2bf4fc2026a267e71ae2b44656ea', -- Claus
                    'fae080f9b05f3457bbd8fb21be9e1b32c7dadcefb0af11ad729970aee44f8a9d', -- Lukas
                    '500ac04af59da09e4e62c8df63bc8b9d3c0fe251d336fddfc0b176d0eecb72a7', -- Oliver
		    '2647b9fec75e130e153728ee8fad14b24764f23637eb9f3b0a68f2a279a74914' -- Stefan                    
                }, -- pubkeys
            }, -- stable
        }, -- branches 
    }, -- autoupdater

    config_mode = {
        -- hide the altitude field
        remote_login = {
            show_password_form = true,
            min_password_length = 16,
        },
        geo_location = {
            show_altitude = false,
-- Prepared for future use
--            osm = {
--                openlayers_url = 'http://ol.ffrhb.de',
--                zoom = 11,
--                center = {
--                    lat = 50.621014637,
--                    lon = 6.961534023,
--                },
--           },
        },
    },

    roles = {
        default = 'node',
        list = {
            'node',
            'backbone',
            'offloader',
            'test',
        },
    },

    setup_mode = {
        skip = true,
    }, -- setup_mode

--   domain_switch = {
--       target_domain = 'dom14',
--       switch_after_offline_mins = 120,
--       switch_time = 1609369200, -- 01.01.2019 - 12:00 UTC
--        connection_check_targets = {
--          '2a03:2260:301a::1', -- Freifunk Supernode
--          '2a03:2260:301a::2', -- Freifunk Supernode
--      },
--    },
}
